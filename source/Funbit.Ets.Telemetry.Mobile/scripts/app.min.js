var Funbit;(function(n){(function(t){(function(t){var i=function(){function t(t){this.serverIp=t;this.config=n.Ets.Telemetry.ConfigurationManager.getConfiguration(this.getUrl("/config.json"));this.skinConfig=this.config.skins[0];this.initializeViewport();this.loadDashboard()}return t.isCordovaAvailable=function(){return document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1},t.prototype.getUrl=function(n){return"http://"+this.serverIp+":25555"+n},t.prototype.initializeViewport=function(){var s=/Trident/.test(navigator.userAgent),h=/Firefox/i.test(navigator.userAgent),c=/iPhone|iPad|iPod/i.test(navigator.userAgent),r=this.skinConfig.width*1,u=this.skinConfig.height*1,f=$(window).width(),e=$(window).height(),o=e/u,n,i;e/u>f/r&&(o=f/r);n="scale("+o*.99+")";i=$("body");i.css("transform",n);h?i.css("-moz-transform",n):s?i.css("-ms-transform",n):i.css("-webkit-transform",n);$(window).on("orientationchange",function(){window.location.reload()});c&&!t.isCordovaAvailable()&&setInterval(function(){window.location.href="/";window.setTimeout(function(){window.stop()},0)},3e4)},t.prototype.loadDashboard=function(){var n=this.config.skins[0],t=this.getUrl("/skins/"+n.name+"/dashboard.css"),i=this.getUrl("/skins/"+n.name+"/dashboard.html");$("head link[rel='stylesheet']").last().after('<link rel="stylesheet" href="'+t+'" type="text/css">');$.ajax({url:i,async:!1,cache:!0,dataType:"html",timeout:5e3}).done(function(n){$("body").append(n)}).fail(function(){alert("Failed to load dashboard.html for skin: "+n.name)})},t.prototype.connectDashboard=function(){this.dashboard||(this.dashboard=new n.Ets.Telemetry.Dashboard(this.getUrl("/api/ets2/telemetry"),this.skinConfig))},t}();t.App=i})(t.Telemetry||(t.Telemetry={}));var i=t.Telemetry})(n.Ets||(n.Ets={}));var t=n.Ets})(Funbit||(Funbit={}));Funbit.Ets.Telemetry.App.isCordovaAvailable()||new Funbit.Ets.Telemetry.App(window.location.hostname).connectDashboard();
//# sourceMappingURL=app.min.js.map
