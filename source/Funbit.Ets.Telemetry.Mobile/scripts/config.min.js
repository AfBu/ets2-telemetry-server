var Funbit;(function(n){(function(n){(function(n){var t=function(){function n(){var t=this,i;if(this.anticacheSeed=0,this.initialized=$.Deferred(),this.skins=[],n.isCordovaAvailable()?(this.insomnia=plugins.insomnia,this.prefs=plugins.appPreferences,this.insomnia.keepAwake()):(this.insomnia={keepAwake:function(){}},this.prefs={fetch:function(){},store:function(){}}),i=n.getParameter("ip"),i){this.serverIp=i;this.initialized.resolve(this);return}this.serverIp="";n.isCordovaAvailable()?this.prefs.fetch(function(n){t.serverIp=n;t.initialized.resolve(t)},function(){t.initialized.resolve(t)},"serverIp"):(this.serverIp=window.location.hostname,this.initialized.resolve(this))}return n.getInstance=function(){return n.instance||(n.instance=new n,n.instance.reload(n.instance.serverIp)),n.instance},n.getParameter=function(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t==null?"":decodeURIComponent(t[1].replace(/\+/g," "))},n.prototype.getSkinConfiguration=function(){var i=n.getParameter("skin"),t;if(i)for(t=0;t<this.skins.length;t++)if(this.skins[t].name==i)return this.skins[t];return null},n.prototype.reload=function(n,t,i){var r=this;(typeof t=="undefined"&&(t=null),typeof i=="undefined"&&(i=null),n)&&(this.serverIp=n,this.prefs.store(function(){},function(){},"serverIp",this.serverIp),$.ajax({url:this.getUrlInternal("/config.json?seed="+this.anticacheSeed++),async:t!=null,dataType:"json",timeout:3e3}).done(function(n){r.skins=n.skins;t&&t()}).fail(function(){r.skins=[];i&&i()}))},n.isCordovaAvailable=function(){return document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1},n.prototype.getUrlInternal=function(n){return"http://"+this.serverIp+":25555"+n},n.getUrl=function(t){return n.getInstance().getUrlInternal(t)},n}();n.Configuration=t})(n.Telemetry||(n.Telemetry={}));var t=n.Telemetry})(n.Ets||(n.Ets={}));var t=n.Ets})(Funbit||(Funbit={}));
//# sourceMappingURL=config.min.js.map
